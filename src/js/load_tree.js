import Phylocanvas from 'phylocanvas';
import ajax from 'phylocanvas-plugin-ajax';
Phylocanvas.plugin(ajax);

import $ from 'jquery';

var tree;
var leaveIDs = new Array();

const createTree = (nwk_file, tree_title) => {
    // console.log(tree_data)
    tree = Phylocanvas.createTree('tree');
    //tree.load('(((2015TE17782-7:24027.78934,(2015TE24962:841.55535,2015TE24973:829.44465):23968.71066):3779.57443,((2015TE24966:2494.4621,(2016TE6979-1-1:1247.84725,(2016TE6637-1-1:372.87561,2016TE6638-1-1:327.12439):1337.98086):1855.5535):24797.91185,(((2016TE6988-1-1:239.14202,(2016TE6978-1-1:201.26275,(2016TE6425-1-1:157.5256,2016TE6426-1-1:180.4744):425.73725):130.60798):854.3810800000001,(2015TE17782-1:1768.6807199999998,((2015TE17782-2:1412.44612,(2015TE17782-3:805.46688,(2015TE17782-5:573.35826,2015TE24964:709.64174):216.53312):622.8605600000001):332.29393,(2016TE6977-1-1:1481.4790400000002,2016TE6302-1-1:1473.0117699999998):94.84279):187.12281000000002):654.33795):386.48665,(2015TE23410:1000.92824,(2015TE17782-11:97.73176,2015TE17782-12:89.26824):1906.38276):37.24268):26040.23384):597.35875):1039.328915,(((2015TE19005-1405:59.21901,(2015TE24976:100.15857,2016TE6636-1-1:44.84143):40.78099):131.54389,((2016TE3342:13.84656,2016TE3325:7.15344):12.09135,(2016TE3335:7.57045,2016TE3343:15.26841):10.50357):248.19966):29579.81803,((2015TE17781-10:23284.21151,(2015TE17781-2:654.10521,2015TE17782-4:713.89479):25520.78849):1401.33337,(((2015CB8315:43.77706,(2015CB8316:20.45298,2015CB8317:27.54702):8.72294):254.02396,((((2016TE337:28.56063,2016TE341:50.43937):31.58831,((((((((2016TE6219-1-1:7.04805,(2016TE6430-1-1:2.99998,2016TE6431-1-1:3.0000000000000004E-5):0.6047600000000001):3.43191,(2016TE840:0.0,2016TE6218-1-1:0.0):0.14273):1.2007,2016TE6176-1-1:12.01069):4.94511,((2016TE6424-1-1:19.44353,2016TE6416-1-1:6.55626):16.19807,(2016TE6175-1-1:20.38079,(2016TE6432-1-1:4.38147,(2016TE6177-1-1:3.36482,(2016TE6179-1-1:1.93531,2016TE6180-1-1:4.06469):0.73236):0.09882):3.51593):16.3312):3.04172):3.82346,2016TE6434-1-1:2.7414199999999997):1.22917,2015TE24968:15.554260000000001):4.59037,2016TE6429-1-1:11.254629999999999):578.08586,(2015TE19005-1355:54.60635,2016TE840-1-1:41.39365):72.28831):100.93129):20.47128,((2015TE17781-5:69.83834,2016TE3206:73.10003):55.011480000000006,(2015TE34286:51.21763,(2016TE340:66.84718,((2015TE23985:37.79541,(2015TE23781:49.70222,(2015TE32270:28.27916,(2015TE17781-9:17.10853,(2015TE17781-8:32.44446,(2015TE17781-3:26.87626,(2015TE17781-6:32.43248,2015TE17781-7:31.56752):7.12374):9.55554):0.51647):3.53334):17.57903):6.31397):2.20771,2016TE1560:51.62852):9.39305):4.36635):15.66005):6.89452):72.54245,(2015TE24980:53.49069,(2015TE5750-40:52.08852,2015TE5750-55:34.91148):28.00931):48.4198):121.70821000000001):100.08277,(2016TE3118:212.88894,((2016TE3113:220.74071,(2016TE3116:163.72003,2016TE3117:184.27997):20.25929):20.66949,(2016TE3119:193.10611,(2016TE3112:189.97739,(2016TE3114:224.83183,2016TE3120:199.16817):16.52261):2.64389):9.26801):30.07981):1576.04002):26695.96936):982.98031):1039.328915');
    //tree.setTreeType('rectangular');
    if (nwk_file){
        tree.load(nwk_file)
    } else {
        tree.load('data/tree_test.nwk')
    }
    tree.setNodeSize(12);
	tree.setTextSize(16);
	tree.branchColour = "#3C7383";
	tree.lineWidth = 1;
	tree.highlightColour = "#FFBB33";
    tree.selectedColour = "#FF8800";		
    //tree.history.container.hidden = true;
	//tree.scalebar.active = false;
	//tree.scalebar.width = 75;
    //tree.scalebar.font = 12;

    tree.setSize(550,750);
    tree.setTreeType('rectangular');

}

// Al caricamento dell'albero
/*
tree.on("loaded",function(e){
    tree.setSize($("#map").width(),$("#map").height());
    tree.setTreeType('rectangular');
    tree.alignlabels = true;
    // Per ogni leave
    leaveIDs = [];
    $.each(tree.leaves,function(i,leave){
        // Popola un array con gli id di tutti i leaves
        leaveIDs.push(leave.id);
        // Imposta stile dei leaves
        leave.setDisplay({
            size: 1.25, // ratio of the base node size
            leafStyle: {
                strokeStyle: '#3c7383',
                fillStyle: 'rgb(155, 183, 191)',
                lineWidth: 1
            }
        });
    });
    tree.draw();
});
*/
// createTree()

export { createTree }